#:kivy 1.10.0

<GridItem>:
    size_hint_x:1
    AsyncImage:  
        size:self.parent.size
        pos:self.parent.pos[0],self.parent.pos[1]
        source: self.parent.imagelink
        auto_bring_to_front:False
        allow_stretch:True
        keep_ratio:False
    Button:
        size_hint_y:1
        size_hint_x:1
        pos:self.parent.pos
        text_size: self.size
        text: "[b]"+self.parent.trackname+"\n-"+self.parent.trackartist+"[/b]"
        valign: 'bottom'
        halign: 'center'
        background_color: 0, 0, 0, 0.2
        markup:True
        on_press: self.parent.on_press_action()

<RV>:
    size_hint_x:1
    viewclass: 'GridItem'
    RecycleGridLayout:
        default_size: dp(180), dp(180)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height

        size_hint_x:1
        orientation: 'vertical'
        cols: int(root.width/dp(180))


<TopTrackScreen>:
    RV:
        size: self.parent.size
        pos: self.parent.pos
<SongScreen>:
    id: songscreen
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            AsyncImage:
                source:'test.png'
                size : (self.parent.width,self.parent.width)
                size_hint: (None, None)
            Label:
                text:songscreen.trackname
                size_hint_y: None
                size_hint_x: 1
                size:self.texture_size
            Label:
                text:'-'+songscreen.trackartist
                size_hint_y: None
                size_hint_x: 1
                size:self.texture_size
            Label:
                text: 'Listeners:'+songscreen.listeners+'\n'+'Playcount:'+songscreen.playcount
                size_hint_y: None
                size_hint_x: 1
                size:self.texture_size
            Button:
                text:'Under Development'
                on_press: root.manager.current = 'toptracks'
                size: self.texture_size
                size_hint_y: None
                size_hint_x: 1
            Widget:
                size_hint_y: 1

            
        Button:
            text:'Second Button'
